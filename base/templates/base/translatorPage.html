{% extends 'main.html' %}

{% block content %}
<section class="bg-indigo-600 text-white py-12 text-center">
    <h1 class="text-4xl font-bold mb-2">ğŸŒ Translate Instantly</h1>
    <p class="text-lg">Choose your languages, type your text, and get real-time translations instantly.</p>
</section>

<section class="py-10 px-4 bg-gray-100">
    <div class="max-w-4xl mx-auto bg-white p-6 rounded-xl shadow-md space-y-6">
        <form method="post" class="space-y-6">
            {% csrf_token %}
            <div class="grid md:grid-cols-2 gap-4">
                <div>
                    <label>From Language</label>
                    <select name="from_lang" class="w-full p-2 border border-gray-300 rounded-md">
                        {% for code, name in languages %}
                            <option value="{{ code }}" {% if request.POST.from_lang == code %}selected{% endif %}>{{ name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div>
                    <label>To Language</label>
                    <select name="to_lang" class="w-full p-2 border border-gray-300 rounded-md">
                        {% for code, name in languages %}
                            <option value="{{ code }}" {% if request.POST.to_lang == code %}selected{% endif %}>{{ name }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        
            <div>
                <label>Enter Text</label>
                <textarea name="input_text" class="w-full h-32 p-3 border rounded-md resize-none">{{ request.POST.input_text }}</textarea>
            </div>
        
            <div class="text-center">
                <button type="submit" class="bg-indigo-600 text-white px-6 py-2 rounded-full font-semibold">
                    Translate
                </button>
            </div>
        </form>

        {% if translated_text %}
        <div>
            <label class="block mb-1 text-gray-700 font-medium">Translated Text</label>
            <textarea class="w-full h-32 p-3 border border-gray-300 rounded-md bg-gray-100 resize-none" readonly>{{ translated_text }}</textarea>
        </div>
        <div class="flex justify-end space-x-4">
            <button onclick="speakText('{{ translated_text }}')" class="text-indigo-600 hover:text-indigo-800 text-sm font-medium">ğŸ”Š Speak</button>
            <button onclick="navigator.clipboard.writeText('{{ translated_text }}')" class="text-indigo-600 hover:text-indigo-800 text-sm font-medium">ğŸ“‹ Copy</button>
        </div>
        {% endif %}
    </div>
</section>

<script>
    function speakText(text) {
        const synth = window.speechSynthesis;
        const utterance = new SpeechSynthesisUtterance(text);
        synth.speak(utterance);
    }
</script>
{% endblock content %}
